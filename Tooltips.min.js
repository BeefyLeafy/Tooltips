class TooltipHelper{constructor(t){t=t||{},this.s={w:t.tooltipWidth||300,t:t.tooltipHTMLTag||"custom-tooltip"},this.d={c:new WeakMap,m:0,e:null},this._c(),document.body.addEventListener("mousemove",t=>{this._g(t)[0]!==this.d.e&&(this.d.m=0,this.d.e=null,this.b.style.opacity="0")})}setTooltip(t,e){let o=!1;this.d.c.get(t)&&(o=!0),this.d.c.set(t,{text:e,mousemove:e=>{this._g(e).length>this.d.m&&(this.d.m=this._g(e).length,this.d.e=t,this._m(t))},mouseleave:()=>{this.d.e===t&&(this.d.m=0,this.d.e=null),this.b.style.opacity="0"}}),o||(t.addEventListener("mouseenter",this.d.c.get(t).mousemove),t.addEventListener("mousemove",this.d.c.get(t).mousemove),t.addEventListener("mouseleave",this.d.c.get(t).mouseleave))}_m(t){this._d()||this._c(),this.b.innerText=this.d.c.get(t).text,window.requestAnimationFrame(()=>{this.b.style.opacity="1";let e=this.b.getBoundingClientRect(),o=this.a(t);o.top-e.height-15>0?this.b.style.top=o.top-e.height-15+"px":this.b.style.top=o.bottom+15+"px";let i=Math.round(o.left+o.width/2);document.documentElement.scrollWidth>this.s.w&&(i+this.s.w/2>document.documentElement.scrollWidth&&(i+=document.documentElement.scrollWidth-(i+this.s.w/2)),i-this.s.w/2<0&&(i+=0-(i-this.s.w/2))),this.b.style.left=i-this.s.w/2+"px"})}getTooltip(t){let e=this.d.c.get(t);return e?e.text:null}removeTooltip(t){this.d.c.get(t)&&(t.removeEventListener("mouseenter",this.d.c.get(t).mousemove),t.removeEventListener("mousemove",this.d.c.get(t).mousemove),t.removeEventListener("mouseleave",this.d.c.get(t).mouseleave),this.d.c.delete(t))}a(t){let e=t.getBoundingClientRect(),o=window.pageXOffset||document.documentElement.scrollLeft,i=window.pageYOffset||document.documentElement.scrollTop;return{width:e.width,height:e.height,top:e.top+i,right:e.right+o,bottom:e.bottom+i,left:e.left+o}}_g(t){let e=t.path||t.composedPath&&t.composedPath();if(!e){e=[];let o=t.target;for(;o;){let t=null;if(o.parentNode)t=o.parentNode;else if(o.host)t=o.host;else{if(!o.defaultView)break;t=o.defaultView}e.push(t),o=t}}return e}_d(){return!!this.b.parentElement}_c(){let t=document.createElement(this.s.t);t.style.cssText=`background-color:rgba(17,17,17);border-radius:4px;color:#ffffff;font-size:13px;font-weight:normal;padding:0.5em 1em;box-sizing:border-box;z-index:99999999;font-family:monospace;position:absolute;pointer-events:none;text-align:left;white-space:pre-wrap;width:${this.s.w}px;transform:translate3d(0,0,0);-webkit-backface-visibility:hidden;backface-visibility:hidden;opacity:0;box-shadow:#ffffff 0px 0px 5px 0px inset;`,document.body.appendChild(t),this.b=t}}