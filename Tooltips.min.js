class TooltipHelper{constructor(t){if(t=t||{},this.settings={tooltipWidth:t.tooltipWidth||300,tooltipHTMLTag:t.tooltipHTMLTag||"custom-tooltip"},this.tooltipData={instanceId:Date.now()+Math.random(),cache:new WeakMap,maxDepth:0,currentElem:null},!document.getElementById("tooltip-"+this.tooltipData.instanceId)){const t=document.createElement(this.settings.tooltipHTMLTag);t.id="tooltip-"+this.tooltipData.instanceId,t.style.cssText=`background-color:rgba(17,17,17);border-radius:4px;color:#ffffff;font-size:13px;font-weight:normal;padding:0.5em 1em;box-sizing:border-box;z-index:99999999;font-family:monospace;position:absolute;pointer-events:none;text-align:left;white-space:pre-wrap;width:${this.settings.tooltipWidth}px;transform:translate3d(0,0,0);-webkit-backface-visibility:hidden;backface-visibility:hidden;opacity:0;box-shadow:#ffffff 0px 0px 5px 0px inset;`,document.body.appendChild(t),document.body.addEventListener("mousemove",t=>{if(t.path[0]!==this.tooltipData.currentElem){this.tooltipData.maxDepth=0,this.tooltipData.currentElem=null;const t=document.getElementById("tooltip-"+this.tooltipData.instanceId);t.style.opacity="0",t.style.left="0",t.style.top="0"}})}}setTooltip(t,e){let o=!1;this.tooltipData.cache.get(t)&&(o=!0),this.tooltipData.cache.set(t,{text:e,mousemove:e=>{e.path.length>this.tooltipData.maxDepth&&(this.tooltipData.maxDepth=e.path.length,this.tooltipData.currentElem=t,this._makeTooltipVisible(t))},mouseleave:()=>{this.tooltipData.currentElem===t&&(this.tooltipData.maxDepth=0,this.tooltipData.currentElem=null);const e=document.getElementById("tooltip-"+this.tooltipData.instanceId);e.style.opacity="0",e.style.left="0",e.style.top="0"}}),o||(t.addEventListener("mouseenter",this.tooltipData.cache.get(t).mousemove),t.addEventListener("mousemove",this.tooltipData.cache.get(t).mousemove),t.addEventListener("mouseleave",this.tooltipData.cache.get(t).mouseleave))}_makeTooltipVisible(t){const e=document.getElementById("tooltip-"+this.tooltipData.instanceId);e.innerText=this.tooltipData.cache.get(t).text,window.requestAnimationFrame(()=>{e.style.opacity="1";const o=e.getBoundingClientRect(),i=this._getAbsoluteBoundingRect(t);i.top-o.height-15>0?e.style.top=i.top-o.height-15+"px":e.style.top=i.bottom+15+"px";let n=Math.round(i.left+i.width/2);document.documentElement.scrollWidth>this.settings.tooltipWidth&&(n+this.settings.tooltipWidth/2>document.documentElement.scrollWidth&&(n+=document.documentElement.scrollWidth-(n+this.settings.tooltipWidth/2)),n-this.settings.tooltipWidth/2<0&&(n+=0-(n-this.settings.tooltipWidth/2))),e.style.left=n-this.settings.tooltipWidth/2+"px"})}getTooltip(t){const e=this.tooltipData.cache.get(t);return e?e.text:null}removeTooltip(t){this.tooltipData.cache.get(t)&&(t.removeEventListener("mouseenter",this.tooltipData.cache.get(t).mousemove),t.removeEventListener("mousemove",this.tooltipData.cache.get(t).mousemove),t.removeEventListener("mouseleave",this.tooltipData.cache.get(t).mouseleave),this.tooltipData.cache.delete(t))}_getAbsoluteBoundingRect(t){const e=t.getBoundingClientRect(),o=window.pageXOffset||document.documentElement.scrollLeft,i=window.pageYOffset||document.documentElement.scrollTop;return{width:e.width,height:e.height,top:e.top+i,right:e.right+o,bottom:e.bottom+i,left:e.left+o}}}